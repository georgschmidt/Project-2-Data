for (i in 1:5) {Solutions0[i] <- length((gregexpr("a", Round0))[[1]])}
Solutions0
for (i in 1:5) {Solutions0[i] <- length((gregexpr("a", Round0))[[i]])}
Solutions0
Round0
Solutions0
cat(Round0, Solutions0, file="Round0.txt")
cat(Round0, Solutions0, file="Round0.txt", sep="" "")
cat(Round0, Solutions0, file="Round0.txt", sep="'" "'")
cat(Round0, Solutions0, file="Round0.txt", sep="' '")
cat(Round0, Solutions0, file="Round0.txt", sep=", ")
cat("var sequences_0 = [", Round0, "]
var solutions_0 = [", Solutions0, "]" file="Round0.txt", sep=", ")
cat("asdf", Round0, Solutions0, "]", file="Round0.txt", sep=", ")
cat("var sequences_0 = [", Round0, "]
var solutions_0 = [", Solutions0, "]", file="Round0.txt", sep=", ")
cat("var sequences_0 = [", Round0, "]
var solutions_0 = [", Solutions0, "]", file="Round0.txt", sep=", ")
cat("var sequences_0 = [", Round0, "]
var solutions_0 = [", Solutions0, "]", file="Round0.txt", sep=",")
Round0
################################################################################
#####                  DATA CLEAN-UP MERITOCRACY PROJECT                   #####
################################################################################
# If you have not already, please install the following packages:
# install.packages("data.table", "ggplot2")
library(data.table)
#Set working directory: setwd("C:\\...\\Project 2\\Data\\VCEE lab testing yyyy-mm-dd")
setwd("C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\VCEE lab testing 2017-06-19")
#Load Data: read.csv("project_2_???? (accessed yyyy-mm-dd).csv", header=TRUE, sep=",")
Data.raw <- read.csv("project_2_cont (accessed 2017-06-19).csv", header=TRUE, sep=",")
Data.raw <- as.data.table(Data.raw)
colnames(Data.raw)[9] #just to check
D <- Data.raw[ participant._current_page_name == "Thank_you"] #to use only complete obs.
#removing irrelevant columns:
rm <- colnames(D)[c(3:6,8:16)]
D[, c(rm):=NULL]
D[, c(grep("player.sharepc", colnames(D))):=NULL] #removes PROD share displayed in %.
D[, c(grep("player.outputinswitch", colnames(D))):=NULL] #removes timeinswitch/10.
#renaming Variables according to our Variables list ("R Variables Documentation.txt")
print(oldnames <- colnames(D)[1:8])
print(newnames <- c("S.ID", "CODE","TREAT","G.ID", "PAY", "LABEL", "LUCK", "SKILL"))
setnames(D, old=c(oldnames), new=c(newnames))
colnames(D) <- sub("player.avgbelief", "BAVG", colnames(D))
colnames(D) <- sub("player.mostprodBTbelief", "BMAXB", colnames(D))
colnames(D) <- sub("player.mostprodATbelief", "BMAXA", colnames(D))
colnames(D) <- sub("player.output", "PROD", colnames(D))
colnames(D) <- sub("player.share", "SHARE", colnames(D))
colnames(D) <- sub("player.switchtime", "SWITCH", colnames(D))
colnames(D) <- sub("player.timeinswitch", "CHILL", colnames(D))
colnames(D) <- sub("player.additionaltime", "ADDT", colnames(D))
colnames(D) <- sub("player.totaloutput", "OUTPUT", colnames(D))
length(grep("player.t", colnames(D))) #just a check whether 5+8*30 = 245 (don't do this before above renaming)
colnames(D) <- sub("player.t", "TIME", colnames(D))
colnames(D) <- sub("group.groupoutput", "GPROD", colnames(D))
colnames(D) <- sub("group.id_in_subsession", "GROUP", colnames(D))
colnames(D) <- sub("session.code", "SCODE", colnames(D))
#after renaming other switch stuff, delete switch dummy
D[, c(grep("player.switch", colnames(D))):=NULL]
#more deletions
D[, c(grep("player.payoff", colnames(D))):=NULL] #remove oTree auto-payoff, we don't use it
D[, c((length(colnames(D))-5):length(colnames(D))):=NULL] # more oTree stuff not needed
D[, c(grep("subsession.round_number", colnames(D))):=NULL]
#FINAL DO NOT TOUCH R.Data
#fix(D)
save(D, file = "C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\VCEE lab testing 2017-06-19\\D.RData")
################################################################################
##########             DATA ANALYSIS MERITOCRACY PROJECT              ##########
################################################################################
# if necessary, please install the following packages:
# install.packages("data.table")
# install.packages("ggplot2")
library(data.table); library(ggplot2); library(reshape2)
#Set working directory: setwd("C:\\...\\Project 2\\Data\\VCEE lab testing yyyy-mm-dd")
setwd("C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\VCEE lab testing 2017-06-19")
#loading D.RData file created in DATA CLEAN-UP: load(file = "C:\\...\\D.RData")
load(file = "C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\VCEE lab testing 2017-06-19\\D.RData")
########****************************************************************########
########                     DESCRIPTIVE STATISTICS                     ########
########****************************************************************########
### Check of RET ####
t1 <- c(grep("TIME1", colnames(D)))
# old version: ugly matplot:
# T1 <- D[, t1, with=F]
# matplot(1:ncol(T1), t(T1), type = "l")
# new version: nice ggplot
df <- as.data.frame(t(D[, t1, with=F]))   #apparently data.table not so good
colnames(df) <- paste0("Subject ", 1:ncol(df))
df_long <- melt(df) #here I use reshape2 package to bring data into long format, better for graphing
names(df_long)[1:2] <- c("Subjects", "Time")
df_long$Sequence <- 1:nrow(df)
ggplot(df_long, aes(Sequence, Time, colour = Subjects)) +
geom_line() +
geom_abline(slope = 0, intercept = 10, colour = "red")  #individually optimal switching point
### Development of Subjects ####
## OUTPUT Development
o <- c(grep("OUTPUT", colnames(D)))
o <- o[2:length(o)]
O <- as.data.frame(t(D[, o, with=F]))
colnames(O) <- paste0("Subject ", 1:ncol(O))
O_long <- melt(O)
names(O_long)[1:2] <- c("Subjects", "Output")
O_long$Round <- 1:nrow(O)
ggplot(O_long, aes(Round, Output, color = Subjects)) +
geom_line() +
geom_vline(xintercept = 2.5, color = "red")
# ORANK (Rank resulting from counting and switch earnings)
OR <- O
for (i in 1:8) {OR[i,] <- rank(-OR[i,], ties.method = "min")}
rownames(OR) <- paste0("ORANK", 1:nrow(OR))
OR_long <- melt(OR)
names(OR_long)[1:2] <- c("Subjects", "Output_Rank")
OR_long$Round <- 1:nrow(OR)
ggplot(OR_long, aes(Round, Output_Rank, color = Subjects)) +
geom_line() +
geom_vline(xintercept = 2.5, color = "red")
## PROD Development
p <- c(grep("^PROD", colnames(D)))  #^ is to omit GPROD
p <- p[3:length(p)]  #get rid of PROD (total) and PROD0 (trial)
P <- as.data.frame(t(D[, p, with=F]))
colnames(P) <- paste0("Subject ", 1:ncol(P))
P_long <- melt(P)
names(P_long)[1:2] <- c("Subjects", "Production")
P_long$Round <- 1:nrow(P)
ggplot(P_long, aes(Round, Production, color = Subjects)) +
geom_line() +
geom_vline(xintercept = 2.5, color = "red")
# PRANK (rank resulting from counting only)
# ORANK (Rank resulting from counting and switch earnings)
PR <- P
for (i in 1:8) {PR[i,] <- rank(-PR[i,], ties.method = "min")}
rownames(PR) <- paste0("PRANK", 1:nrow(PR))
PR_long <- melt(PR)
names(PR_long)[1:2] <- c("Subjects", "Production_Rank")
PR_long$Round <- 1:nrow(PR)
ggplot(PR_long, aes(Round, Production_Rank, color = Subjects)) +
geom_line() +
geom_vline(xintercept = 2.5, color = "red")
library(data.table)
setwd("C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data")
Data.raw <- read.csv("project_2_cont-accessed-2017-06-25-tech_added.csv", header=TRUE, sep=",")
Data.raw <- as.data.table(Data.raw)
colnames(Data.raw)[9] #just to check
View(Data.raw)
D <- Data.raw[ participant._current_page_name == "Thank_you"] #to use only complete obs.
fix(D)
library(data.table)
setwd("C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data")
Data.raw <- read.csv("project_2_cont-accessed-2017-06-25-tech_added.csv", header=TRUE, sep=",")
Data.raw <- as.data.table(Data.raw)
colnames(Data.raw)[9] #just to check
D <- Data.raw[ participant._current_page_name == "Thank_you"] #to use only complete obs.
View(D)
rm <- colnames(D)[c(3:6,8:16)]
D[, c(rm):=NULL]
D[, c(grep("player.sharepc", colnames(D))):=NULL] #removes PROD share displayed in %.
D[, c(grep("player.outputinswitch", colnames(D))):=NULL] #removes timeinswitch/10.
print(oldnames <- colnames(D)[1:8])
print(oldnames <- colnames(D)[1:9])
print(oldnames <- colnames(D)[1:10])
print(oldnames <- colnames(D)[1:9])
print(newnames <- c("S.ID", "CODE","TREAT","G.ID", "PAY", "LABEL", "LUCK", "EFFORT", "SKILL"))
setnames(D, old=c(oldnames), new=c(newnames))
colnames(D) <- sub("player.avgbelief", "BAVG", colnames(D))
colnames(D) <- sub("player.mostprodBTbelief", "BMAXB", colnames(D))
colnames(D) <- sub("player.mostprodATbelief", "BMAXA", colnames(D))
colnames(D) <- sub("player.output", "PROD", colnames(D))
colnames(D) <- sub("player.share", "SHARE", colnames(D))
colnames(D) <- sub("player.switchtime", "SWITCH", colnames(D))
colnames(D) <- sub("player.timeinswitch", "CHILL", colnames(D))
colnames(D) <- sub("player.additionaltime", "ADDT", colnames(D))
colnames(D) <- sub("player.totaloutput", "OUTPUT", colnames(D))
length(grep("player.t", colnames(D))) #just a check whether 5+8*30 = 245 (don't do this before above renaming)
colnames(D) <- sub("player.t", "TIME", colnames(D))
colnames(D) <- sub("group.groupoutput", "GPROD", colnames(D))
colnames(D) <- sub("group.id_in_subsession", "GROUP", colnames(D))
colnames(D) <- sub("session.code", "SCODE", colnames(D))
D[, c(grep("player.switch", colnames(D))):=NULL]
View(D)
D[, c(grep("player.payoff", colnames(D))):=NULL] #remove oTree auto-payoff, we don't use it
D[, c((length(colnames(D))-5):length(colnames(D))):=NULL] # more oTree stuff not needed
################################################################################
#####                  DATA CLEAN-UP MERITOCRACY PROJECT                   #####
################################################################################
# If you have not already, please install the following packages:
# install.packages("data.table", "ggplot2")
library(data.table)
#Set working directory: setwd("C:\\...\\Project 2\\Data\\VCEE lab testing yyyy-mm-dd")
setwd("C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data")
#Load Data: read.csv("project_2_???? (accessed yyyy-mm-dd).csv", header=TRUE, sep=",")
Data.raw <- read.csv("project_2_cont-accessed-2017-06-25-tech_added.csv", header=TRUE, sep=",")
Data.raw <- as.data.table(Data.raw)
colnames(Data.raw)[9] #just to check
D <- Data.raw[ participant._current_page_name == "Thank_you"] #to use only complete obs.
#removing irrelevant columns:
rm <- colnames(D)[c(3:6,8:16)]
D[, c(rm):=NULL]
D[, c(grep("player.sharepc", colnames(D))):=NULL] #removes PROD share displayed in %.
D[, c(grep("player.outputinswitch", colnames(D))):=NULL] #removes timeinswitch/10.
#renaming Variables according to our Variables list ("R Variables Documentation.txt")
print(oldnames <- colnames(D)[1:9])
print(newnames <- c("S.ID", "CODE","TREAT","G.ID", "PAY", "LABEL", "LUCK", "EFFORT", "SKILL"))
setnames(D, old=c(oldnames), new=c(newnames))
colnames(D) <- sub("player.avgbelief", "BAVG", colnames(D))
colnames(D) <- sub("player.mostprodBTbelief", "BMAXB", colnames(D))
colnames(D) <- sub("player.mostprodATbelief", "BMAXA", colnames(D))
colnames(D) <- sub("player.output", "PROD", colnames(D))
colnames(D) <- sub("player.share", "SHARE", colnames(D))
colnames(D) <- sub("player.switchtime", "SWITCH", colnames(D))
colnames(D) <- sub("player.timeinswitch", "CHILL", colnames(D))
colnames(D) <- sub("player.additionaltime", "ADDT", colnames(D))
colnames(D) <- sub("player.totaloutput", "OUTPUT", colnames(D))
length(grep("player.t", colnames(D))) #just a check whether 5+8*30 = 245 (don't do this before above renaming)
colnames(D) <- sub("player.t", "TIME", colnames(D))
colnames(D) <- sub("group.groupoutput", "GPROD", colnames(D))
colnames(D) <- sub("group.id_in_subsession", "GROUP", colnames(D))
colnames(D) <- sub("session.code", "SCODE", colnames(D))
#after renaming other switch stuff, delete switch dummy
D[, c(grep("player.switch", colnames(D))):=NULL]
#more deletions
D[, c(grep("player.payoff", colnames(D))):=NULL] #remove oTree auto-payoff, we don't use it
fix(D)
grep("session.", colnames(D))
fix(D)
D[, c(grep("session.", colnames(D))):=NULL]
################################################################################
#####                  DATA CLEAN-UP MERITOCRACY PROJECT                   #####
################################################################################
# If you have not already, please install the following packages:
# install.packages("data.table", "ggplot2")
library(data.table)
#Set working directory: setwd("C:\\...\\Project 2\\Data\\VCEE lab testing yyyy-mm-dd")
setwd("C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data")
#Load Data: read.csv("project_2_???? (accessed yyyy-mm-dd).csv", header=TRUE, sep=",")
Data.raw <- read.csv("project_2_cont-accessed-2017-06-25-tech_added.csv", header=TRUE, sep=",")
Data.raw <- as.data.table(Data.raw)
colnames(Data.raw)[9] #just to check
D <- Data.raw[ participant._current_page_name == "Thank_you"] #to use only complete obs.
#removing irrelevant columns:
rm <- colnames(D)[c(3:6,8:16)]
D[, c(rm):=NULL]
D[, c(grep("player.sharepc", colnames(D))):=NULL] #removes PROD share displayed in %.
D[, c(grep("player.outputinswitch", colnames(D))):=NULL] #removes timeinswitch/10.
#renaming Variables according to our Variables list ("R Variables Documentation.txt")
print(oldnames <- colnames(D)[1:9])
print(newnames <- c("S.ID", "CODE","TREAT","G.ID", "PAY", "LABEL", "LUCK", "EFFORT", "SKILL"))
setnames(D, old=c(oldnames), new=c(newnames))
colnames(D) <- sub("player.avgbelief", "BAVG", colnames(D))
colnames(D) <- sub("player.mostprodBTbelief", "BMAXB", colnames(D))
colnames(D) <- sub("player.mostprodATbelief", "BMAXA", colnames(D))
colnames(D) <- sub("player.output", "PROD", colnames(D))
colnames(D) <- sub("player.share", "SHARE", colnames(D))
colnames(D) <- sub("player.switchtime", "SWITCH", colnames(D))
colnames(D) <- sub("player.timeinswitch", "CHILL", colnames(D))
colnames(D) <- sub("player.additionaltime", "ADDT", colnames(D))
colnames(D) <- sub("player.totaloutput", "OUTPUT", colnames(D))
length(grep("player.t", colnames(D))) #just a check whether 5+8*30 = 245 (don't do this before above renaming)
colnames(D) <- sub("player.t", "TIME", colnames(D))
colnames(D) <- sub("group.groupoutput", "GPROD", colnames(D))
colnames(D) <- sub("group.id_in_subsession", "GROUP", colnames(D))
colnames(D) <- sub("session.code", "SCODE", colnames(D))
#after renaming other switch stuff, delete switch dummy
D[, c(grep("player.switch", colnames(D))):=NULL]
#more deletions
D[, c(grep("player.payoff", colnames(D))):=NULL] #remove oTree auto-payoff, we don't use it
View(D)
View(D)
D[, c(grep("session.", colnames(D))):=NULL]
View(D)
save(D, file = "C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data\\D.RData")
colnames(D)
nrow(D)
D[, TREAT := rep(0, times=nrow(D))]
view(D)
View(D)
save(D, file = "C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data\\D.RData")
################################################################################
#####                  DATA CLEAN-UP MERITOCRACY PROJECT                   #####
################################################################################
# If you have not already, please install the following packages:
# install.packages("data.table", "ggplot2")
library(data.table)
#Set working directory: setwd("C:\\...\\Project 2\\Data\\VCEE lab testing yyyy-mm-dd")
setwd("C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data")
#Load Data: read.csv("project_2_???? (accessed yyyy-mm-dd).csv", header=TRUE, sep=",")
Data.raw <- read.csv("project_2_cont-accessed-2017-06-25-tech_added.csv", header=TRUE, sep=",")
Data.raw <- as.data.table(Data.raw)
colnames(Data.raw)[9] #just to check
D <- Data.raw[ participant._current_page_name == "Thank_you"] #to use only complete obs.
#removing irrelevant columns:
rm <- colnames(D)[c(3:6,8:16)]
D[, c(rm):=NULL]
D[, c(grep("player.sharepc", colnames(D))):=NULL] #removes PROD share displayed in %.
D[, c(grep("player.outputinswitch", colnames(D))):=NULL] #removes timeinswitch/10.
#renaming Variables according to our Variables list ("R Variables Documentation.txt")
print(oldnames <- colnames(D)[1:9])
print(newnames <- c("S.ID", "CODE","TREAT","G.ID", "PAY", "LABEL", "LUCK", "EFFORT", "SKILL"))
setnames(D, old=c(oldnames), new=c(newnames))
colnames(D) <- sub("player.avgbelief", "BAVG", colnames(D))
colnames(D) <- sub("player.mostprodBTbelief", "BMAXB", colnames(D))
colnames(D) <- sub("player.mostprodATbelief", "BMAXA", colnames(D))
colnames(D) <- sub("player.output", "PROD", colnames(D))
colnames(D) <- sub("player.share", "SHARE", colnames(D))
colnames(D) <- sub("player.switchtime", "SWITCH", colnames(D))
colnames(D) <- sub("player.timeinswitch", "CHILL", colnames(D))
colnames(D) <- sub("player.additionaltime", "ADDT", colnames(D))
colnames(D) <- sub("player.totaloutput", "OUTPUT", colnames(D))
length(grep("player.t", colnames(D))) #just a check whether 5+8*30 = 245 (don't do this before above renaming)
colnames(D) <- sub("player.t", "TIME", colnames(D))
colnames(D) <- sub("group.groupoutput", "GPROD", colnames(D))
colnames(D) <- sub("group.id_in_subsession", "GROUP", colnames(D))
colnames(D) <- sub("session.code", "SCODE", colnames(D))
#after renaming other switch stuff, delete switch dummy
D[, c(grep("player.switch", colnames(D))):=NULL]
#more deletions
D[, c(grep("player.payoff", colnames(D))):=NULL] #remove oTree auto-payoff, we don't use it
D[, c(grep("session.", colnames(D))):=NULL]
##CARFUL: Updating TREAT column (0 if cont, 1 if treat)
D[, TREAT := rep(0, times=nrow(D))]
#FINAL DO NOT TOUCH R.Data
#fix(D)
save(D, file = "C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data\\D_cont.RData")
Data.raw <- read.csv("project_2_treat-accessed-2017-06-25-tech_added.csv", header=TRUE, sep=",")
Data.raw <- as.data.table(Data.raw)
colnames(Data.raw)[9] #just to check
D <- Data.raw[ participant._current_page_name == "Thank_you"] #to use only complete obs.
View(D)
colnames(D)[c(3:20)]
colnames(D)[17]
rm <- colnames(D)[c(3:6,8:16)]
D[, c(rm):=NULL]
D[, c(grep("player.sharepc", colnames(D))):=NULL] #removes PROD share displayed in %.
D[, c(grep("player.outputinswitch", colnames(D))):=NULL] #removes timeinswitch/10.
print(oldnames <- colnames(D)[1:9])
print(newnames <- c("S.ID", "CODE","TREAT","G.ID", "PAY", "LABEL", "LUCK", "EFFORT", "SKILL"))
setnames(D, old=c(oldnames), new=c(newnames))
colnames(D) <- sub("player.avgbelief", "BAVG", colnames(D))
colnames(D) <- sub("player.mostprodBTbelief", "BMAXB", colnames(D))
colnames(D) <- sub("player.mostprodATbelief", "BMAXA", colnames(D))
colnames(D) <- sub("player.output", "PROD", colnames(D))
colnames(D) <- sub("player.share", "SHARE", colnames(D))
colnames(D) <- sub("player.switchtime", "SWITCH", colnames(D))
colnames(D) <- sub("player.timeinswitch", "CHILL", colnames(D))
colnames(D) <- sub("player.additionaltime", "ADDT", colnames(D))
colnames(D) <- sub("player.totaloutput", "OUTPUT", colnames(D))
length(grep("player.t", colnames(D))) #just a check whether 5+8*30 = 245 (don't do this before above renaming)
colnames(D) <- sub("player.t", "TIME", colnames(D))
colnames(D) <- sub("group.groupoutput", "GPROD", colnames(D))
colnames(D) <- sub("group.id_in_subsession", "GROUP", colnames(D))
colnames(D) <- sub("session.code", "SCODE", colnames(D))
D[, c(grep("player.switch", colnames(D))):=NULL]
D[, c(grep("player.payoff", colnames(D))):=NULL] #remove oTree auto-payoff, we don't use it
D[, c(grep("session.", colnames(D))):=NULL]
D[, TREAT := rep(1, times=nrow(D))]
save(D, file = "C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data\\D_treat.RData")
load(file = "C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data\\D_cont.RData")
load(file = "C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data\\D_treat.RData")
################################################################################
#####                  DATA CLEAN-UP MERITOCRACY PROJECT                   #####
################################################################################
# If you have not already, please install the following packages:
# install.packages("data.table", "ggplot2")
library(data.table)
#Set working directory: setwd("C:\\...\\Project 2\\Data\\VCEE lab testing yyyy-mm-dd")
setwd("C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data")
#Load Data: read.csv("project_2_???? (accessed yyyy-mm-dd).csv", header=TRUE, sep=",")
Data.raw <- read.csv("project_2_treat-accessed-2017-06-25-tech_added.csv", header=TRUE, sep=",")
Data.raw <- as.data.table(Data.raw)
colnames(Data.raw)[9] #just to check
D <- Data.raw[ participant._current_page_name == "Thank_you"] #to use only complete obs.
#removing irrelevant columns:
rm <- colnames(D)[c(3:6,8:16)]
D[, c(rm):=NULL]
D[, c(grep("player.sharepc", colnames(D))):=NULL] #removes PROD share displayed in %.
D[, c(grep("player.outputinswitch", colnames(D))):=NULL] #removes timeinswitch/10.
#renaming Variables according to our Variables list ("R Variables Documentation.txt")
print(oldnames <- colnames(D)[1:9])
print(newnames <- c("S.ID", "CODE","TREAT","G.ID", "PAY", "LABEL", "LUCK", "EFFORT", "SKILL"))
setnames(D, old=c(oldnames), new=c(newnames))
colnames(D) <- sub("player.avgbelief", "BAVG", colnames(D))
colnames(D) <- sub("player.mostprodBTbelief", "BMAXB", colnames(D))
colnames(D) <- sub("player.mostprodATbelief", "BMAXA", colnames(D))
colnames(D) <- sub("player.output", "PROD", colnames(D))
colnames(D) <- sub("player.share", "SHARE", colnames(D))
colnames(D) <- sub("player.switchtime", "SWITCH", colnames(D))
colnames(D) <- sub("player.timeinswitch", "CHILL", colnames(D))
colnames(D) <- sub("player.additionaltime", "ADDT", colnames(D))
colnames(D) <- sub("player.totaloutput", "OUTPUT", colnames(D))
length(grep("player.t", colnames(D))) #just a check whether 5+8*30 = 245 (don't do this before above renaming)
colnames(D) <- sub("player.t", "TIME", colnames(D))
colnames(D) <- sub("group.groupoutput", "GPROD", colnames(D))
colnames(D) <- sub("group.id_in_subsession", "GROUP", colnames(D))
colnames(D) <- sub("session.code", "SCODE", colnames(D))
#after renaming other switch stuff, delete switch dummy
D[, c(grep("player.switch", colnames(D))):=NULL]
#more deletions
D[, c(grep("player.payoff", colnames(D))):=NULL] #remove oTree auto-payoff, we don't use it
D[, c(grep("session.", colnames(D))):=NULL]
##CARFUL: Updating TREAT column (0 if cont, 1 if treat)
D[, TREAT := rep(1, times=nrow(D))]
D_treat <- D
save(D_treat, file = "C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data\\D_treat.RData")
load(file = "C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data\\D_treat.RData")
################################################################################
#####                  DATA CLEAN-UP MERITOCRACY PROJECT                   #####
################################################################################
# If you have not already, please install the following packages:
# install.packages("data.table", "ggplot2")
library(data.table)
#Set working directory: setwd("C:\\...\\Project 2\\Data\\VCEE lab testing yyyy-mm-dd")
setwd("C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data")
#Load Data: read.csv("project_2_???? (accessed yyyy-mm-dd).csv", header=TRUE, sep=",")
Data.raw <- read.csv("project_2_cont-accessed-2017-06-25-tech_added.csv", header=TRUE, sep=",")
Data.raw <- as.data.table(Data.raw)
colnames(Data.raw)[9] #just to check
D <- Data.raw[ participant._current_page_name == "Thank_you"] #to use only complete obs.
#removing irrelevant columns:
rm <- colnames(D)[c(3:6,8:16)]
D[, c(rm):=NULL]
D[, c(grep("player.sharepc", colnames(D))):=NULL] #removes PROD share displayed in %.
D[, c(grep("player.outputinswitch", colnames(D))):=NULL] #removes timeinswitch/10.
#renaming Variables according to our Variables list ("R Variables Documentation.txt")
print(oldnames <- colnames(D)[1:9])
print(newnames <- c("S.ID", "CODE","TREAT","G.ID", "PAY", "LABEL", "LUCK", "EFFORT", "SKILL"))
setnames(D, old=c(oldnames), new=c(newnames))
colnames(D) <- sub("player.avgbelief", "BAVG", colnames(D))
colnames(D) <- sub("player.mostprodBTbelief", "BMAXB", colnames(D))
colnames(D) <- sub("player.mostprodATbelief", "BMAXA", colnames(D))
colnames(D) <- sub("player.output", "PROD", colnames(D))
colnames(D) <- sub("player.share", "SHARE", colnames(D))
colnames(D) <- sub("player.switchtime", "SWITCH", colnames(D))
colnames(D) <- sub("player.timeinswitch", "CHILL", colnames(D))
colnames(D) <- sub("player.additionaltime", "ADDT", colnames(D))
colnames(D) <- sub("player.totaloutput", "OUTPUT", colnames(D))
length(grep("player.t", colnames(D))) #just a check whether 5+8*30 = 245 (don't do this before above renaming)
colnames(D) <- sub("player.t", "TIME", colnames(D))
colnames(D) <- sub("group.groupoutput", "GPROD", colnames(D))
colnames(D) <- sub("group.id_in_subsession", "GROUP", colnames(D))
colnames(D) <- sub("session.code", "SCODE", colnames(D))
#after renaming other switch stuff, delete switch dummy
D[, c(grep("player.switch", colnames(D))):=NULL]
#more deletions
D[, c(grep("player.payoff", colnames(D))):=NULL] #remove oTree auto-payoff, we don't use it
D[, c(grep("session.", colnames(D))):=NULL]
##CARFUL: Updating TREAT column (0 if cont, 1 if treat)
D[, TREAT := rep(0, times=nrow(D))]
#Save, name according to treatment D_cont/treat.RData
D_cont <- D
save(D_cont, file = "C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data\\D_cont.RData")
load(file = "C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data\\D_cont.RData")
load(file = "C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data\\D_treat.RData")
colnames(D_cont) == colnames(D_treat)
View(D_cont)
View(D_treat)
################################################################################
#####                  DATA CLEAN-UP MERITOCRACY PROJECT                   #####
################################################################################
# If you have not already, please install the following packages:
# install.packages("data.table", "ggplot2")
library(data.table)
#Set working directory: setwd("C:\\...\\Project 2\\Data\\VCEE lab testing yyyy-mm-dd")
setwd("C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data")
#Load Data: read.csv("project_2_???? (accessed yyyy-mm-dd).csv", header=TRUE, sep=",")
Data.raw <- read.csv("project_2_treat-accessed-2017-06-25-tech_added.csv", header=TRUE, sep=",")
Data.raw <- as.data.table(Data.raw)
colnames(Data.raw)[9] #just to check
D <- Data.raw[ participant._current_page_name == "Thank_you"] #to use only complete obs.
#removing irrelevant columns:
rm <- colnames(D)[c(3:6,8:16)]
D[, c(rm):=NULL]
D[, c(grep("player.sharepc", colnames(D))):=NULL] #removes PROD share displayed in %.
D[, c(grep("player.outputinswitch", colnames(D))):=NULL] #removes timeinswitch/10.
#renaming Variables according to our Variables list ("R Variables Documentation.txt")
print(oldnames <- colnames(D)[1:9])
print(newnames <- c("S.ID", "CODE","TREAT","G.ID", "PAY", "LABEL", "LUCK", "EFFORT", "SKILL"))
setnames(D, old=c(oldnames), new=c(newnames))
colnames(D) <- sub("player.avgbelief", "BAVG", colnames(D))
colnames(D) <- sub("player.mostprodBTbelief", "BMAXB", colnames(D))
colnames(D) <- sub("player.mostprodATbelief", "BMAXA", colnames(D))
colnames(D) <- sub("player.output", "PROD", colnames(D))
colnames(D) <- sub("player.share", "SHARE", colnames(D))
colnames(D) <- sub("player.switchtime", "SWITCH", colnames(D))
colnames(D) <- sub("player.timeinswitch", "CHILL", colnames(D))
colnames(D) <- sub("player.additionaltime", "ADDT", colnames(D))
colnames(D) <- sub("player.totaloutput", "OUTPUT", colnames(D))
length(grep("player.t", colnames(D))) #just a check whether 5+8*30 = 245 (don't do this before above renaming)
colnames(D) <- sub("player.t", "TIME", colnames(D))
colnames(D) <- sub("group.groupoutput", "GPROD", colnames(D))
colnames(D) <- sub("group.id_in_subsession", "GROUP", colnames(D))
colnames(D) <- sub("session.code", "SCODE", colnames(D))
#after renaming other switch stuff, delete switch dummy
D[, c(grep("player.switch", colnames(D))):=NULL]
#more deletions
D[, c(grep("player.rank", colnames(D))):=NULL]
D[, c(grep("player.payoff", colnames(D))):=NULL] #remove oTree auto-payoff, we don't use it
D[, c(grep("session.", colnames(D))):=NULL]
##CARFUL: Updating TREAT column (0 if cont, 1 if treat)
D[, TREAT := rep(1, times=nrow(D))]
#Save, name according to treatment D_cont/treat.RData
D_treat <- D
save(D_treat, file = "C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data\\D_treat.RData")
load(file = "C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data\\D_cont.RData")
load(file = "C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data\\D_treat.RData")
View(D_cont)
View(D_treat)
rbind.data.table(D_cont, D_treat)
rbind(D_cont, D_treat)
D <- rbind(D_cont, D_treat)
View(D)
save(D, file = "C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data\\D.RData")
write.csv(D)
write.csv(D, file = "C:\\Users\\Georg\\OneDrive\\Studium\\VWL-Master curr 2013\\17 S\\Designing and Implementing an Economic Experiment\\Moodle\\Project 2\\Data\\Project-2-Data\\D.csv", row.names = F)
